<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PetaVision: OpenPV/src/layers/HyPerLayer.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PetaVision
   &#160;<span id="projectnumber">Alpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('HyPerLayer_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HyPerLayer.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#ifndef HYPERLAYER_HPP_</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#define HYPERLAYER_HPP_</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;checkpointing/CheckpointableFileStream.hpp&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;columns/Communicator.hpp&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;columns/DataStore.hpp&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;columns/HyPerCol.hpp&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;columns/Publisher.hpp&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;columns/Random.hpp&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;include/pv_common.h&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;include/pv_types.h&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;initv/BaseInitV.hpp&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;io/fileio.hpp&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;layers/BaseLayer.hpp&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;layers/PVLayerCube.hpp&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;probes/LayerProbe.hpp&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;utils/Timer.hpp&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#undef PV_USE_CUDA</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;layers/updateStateFunctions.h&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#define PV_USE_CUDA</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;layers/updateStateFunctions.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDA</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#ifdef PV_USE_OPENMP_THREADS</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;omp.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#endif // PV_USE_OPENMP_THREADS</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;arch/cuda/CudaBuffer.hpp&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;arch/cuda/CudaKernel.hpp&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;arch/cuda/CudaTimer.hpp&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDA</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// default constants</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#define HYPERLAYER_FEEDBACK_DELAY 1</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#define HYPERLAYER_FEEDFORWARD_DELAY 0</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacePV.html">PV</a> {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">class </span>PVParams;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">class </span>BaseConnection;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> TriggerBehaviorTypeEnum {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   NO_TRIGGER,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   UPDATEONLY_TRIGGER,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   RESETSTATE_TRIGGER</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;} TriggerBehaviorType;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classPV_1_1HyPerLayer.html">   64</a></span>&#160;<span class="keyword">class </span><a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> : <span class="keyword">public</span> <a class="code" href="classPV_1_1BaseLayer.html">BaseLayer</a> {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> ioParam_dataType(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a4604e955c54550237b44c4d4290655aa">ioParam_updateGpu</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a820c2695371eced2233ffd17d65bcd98">ioParam_nxScale</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#ad92d8a1d8ed7f9587ee6ef754d455366">ioParam_nyScale</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a38dbdd16a68095acea310a7f7003fa13">ioParam_nf</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a65e4c8eaa17655ef4c03147beed369b3">ioParam_phase</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a0d14e0e4bcfd9d10aa0918503ce4a7d6">ioParam_mirrorBCflag</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a69fcd09e34fbb76fc3e6434443c2fe0e">ioParam_valueBC</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a66b9f708d3e8f077a7b4fe8d51b4b138">ioParam_initializeFromCheckpointFlag</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a651cb7cee711755c35fd7d9b450cdf5e">ioParam_InitVType</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#ae4df11ee53d2d7831ec931e5cbb4a6f9">ioParam_triggerFlag</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a4cb78e4b327b84207199f222cd79f808">ioParam_triggerLayerName</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <span class="comment">// TODO: triggerOffset is measured in units of simulation time, not timesteps.  How does</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <span class="comment">// adaptTimeStep affect</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <span class="comment">// the triggering time?</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#abf47d71a0d1acabaebf97125c196f870">ioParam_triggerOffset</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a5cde54075d384518c5516f8c079ca26d">ioParam_triggerBehavior</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#aded80bac62512e73f789bd209933717f">ioParam_triggerResetLayerName</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a08b613ce7777b06a21ef20c85c739f4b">ioParam_writeStep</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a65fe374a6f26682e54bf1c132080ea1d">ioParam_initialWriteTime</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a20ef648236095449ebc8cc86716915ac">ioParam_sparseLayer</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#abca1bdde7c71b4ffa71aa30f5d0eba88">ioParam_writeSparseValues</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag); <span class="comment">// obsolete March 14, 2017.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"></span>  <span class="keyword">private</span>:</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordtype">int</span> initialize_base();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="comment">// only subclasses can be constructed directly</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a>();</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="classPV_1_1HyPerLayer.html#a4427fa8d7ed110c3cc45d243a425c16f">initialize</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="classPV_1_1HyPerCol.html">HyPerCol</a> *hc);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> initClayer();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> allocateClayerBuffers();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordtype">int</span> setLayerLoc(<a class="code" href="structPVLayerLoc__.html">PVLayerLoc</a> *layerLoc, <span class="keywordtype">float</span> nxScale, <span class="keywordtype">float</span> nyScale, <span class="keywordtype">int</span> nf, <span class="keywordtype">int</span> numBatches);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> allocateBuffers();</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> allocateGSyn();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="keywordtype">void</span> addPublisher();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">    * Allocates a buffer of the given length.  The membrane potential and activity buffer, among</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">    * others, are created using allocateBuffer.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">    * To free a buffer created with this method, call freeBuffer().</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keywordtype">void</span> allocateBuffer(T **buf, <span class="keywordtype">int</span> bufsize, <span class="keyword">const</span> <span class="keywordtype">char</span> *bufname);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#abea1a703930c35493f42ea38bf9a0118">allocateRestrictedBuffer</a>(<span class="keywordtype">float</span> **buf, <span class="keyword">const</span> <span class="keywordtype">char</span> *bufname);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a60536458c87edac02bd49815a7524662">allocateExtendedBuffer</a>(<span class="keywordtype">float</span> **buf, <span class="keyword">const</span> <span class="keywordtype">char</span> *bufname);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> allocateV();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> allocateActivity();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> allocatePrevActivity();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="keywordtype">void</span> checkpointPvpActivityFloat(</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;         <a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         <span class="keywordtype">char</span> <span class="keyword">const</span> *bufferName,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         <span class="keywordtype">float</span> *pvpBuffer,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;         <span class="keywordtype">bool</span> extended);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordtype">void</span> checkpointRandState(</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;         <a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;         <span class="keywordtype">char</span> <span class="keyword">const</span> *bufferName,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         <a class="code" href="classPV_1_1Random.html">Random</a> *randState,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         <span class="keywordtype">bool</span> extendedFlag);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> initializeV();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> initializeActivity();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keyword">virtual</span> Response::Status readStateFromCheckpoint(<a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer) <span class="keyword">override</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> readActivityFromCheckpoint(<a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> readVFromCheckpoint(<a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> readDelaysFromCheckpoint(<a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keyword">virtual</span> Response::Status copyInitialStateToGPU() <span class="keyword">override</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDA</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   <span class="comment">// readBufferFile and readDataStoreFromFile were removed Jan 23, 2017.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="comment">// They were only used by checkpointing, which is now handled by the</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="comment">// CheckpointEntry class hierarchy.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordtype">void</span> updateNBands(<span class="keywordtype">int</span> numCalls);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keyword">virtual</span> Response::Status processCheckpointRead() <span class="keyword">override</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordtype">void</span> calcNumExtended();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classPV_1_1HyPerLayer.html#a07cb415a70aedf6cc8fc57e493d17139">needReset</a>(<span class="keywordtype">double</span> timed, <span class="keywordtype">double</span> dt);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a06eb20101adacc02c0963e981816dfa2">resetStateOnTrigger</a>();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">    * Frees a buffer created by allocateBuffer().  Note that the address to the buffer</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">    * is passed as the argument; on return, the address contains NULL.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">    * Note that there is no checking whether the buffer was created by allocateBuffer(),</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    * or any other allocateBuffer()-related method.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordtype">int</span> freeBuffer(T **buf);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="classPV_1_1HyPerLayer.html#a5aa92946ff7292396576bccb72d60329">freeRestrictedBuffer</a>(<span class="keywordtype">float</span> **buf);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="classPV_1_1HyPerLayer.html#a59b5e16d1b64d30f990e2cc9c06a6cf6">freeExtendedBuffer</a>(<span class="keywordtype">float</span> **buf);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordtype">bool</span> <a class="code" href="classPV_1_1HyPerLayer.html#a2e384c9ee929aef35ba67c526ff78fd2">isAllInputReady</a>();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="classPV_1_1HyPerCol.html">HyPerCol</a> *hc);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordtype">float</span> *getActivity() {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keywordflow">return</span> clayer-&gt;activity-&gt;data;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   } <span class="comment">// TODO: access to clayer-&gt;activity-&gt;data should not be public</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">double</span> getTimeScale(<span class="keywordtype">int</span> batchIdx) { <span class="keywordflow">return</span> -1.0; };</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> activityIsSpiking() { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   PVDataType getDataType() { <span class="keywordflow">return</span> dataType; }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keyword">virtual</span> Response::Status respond(std::shared_ptr&lt;BaseMessage const&gt; message) <span class="keyword">override</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classPV_1_1HyPerLayer.html#adf78265c6f0dc7bb94286934a9e5bd7a">ioParamsFillGroup</a>(<span class="keyword">enum</span> ParamsIOFlag ioFlag) <span class="keyword">override</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> equalizeMargins(<a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> *layer1, <a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> *layer2);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keywordtype">int</span> freeClayer();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keyword">virtual</span> ~<a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a>();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordtype">void</span> synchronizeMarginWidth(<a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> *layer);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="comment">// TODO - make protected</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <a class="code" href="structPVLayer__.html">PVLayer</a> *clayer;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="comment">// ************************************************************************************//</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="comment">// interface for public methods for controlling HyPerLayer cellular and synaptic dynamics</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="comment">// (i.e. methods for receiving synaptic input, updating internal state, publishing output)</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="comment">// ************************************************************************************//</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> recvAllSynapticInput(); <span class="comment">// Calls recvSynapticInput for each conn and each arborID</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="comment">// An updateState wrapper that determines if updateState needs to be called</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   Response::Status callUpdateState(<span class="keywordtype">double</span> simTime, <span class="keywordtype">double</span> dt);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classPV_1_1HyPerLayer.html#a8a8f1f11808763cf05727f5e15f595a8">needUpdate</a>(<span class="keywordtype">double</span> simTime, <span class="keywordtype">double</span> dt);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classPV_1_1HyPerLayer.html#a7ddccdd0e2b3db084c4c3775341d7664">getDeltaUpdateTime</a>();</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classPV_1_1HyPerLayer.html#ab0088a3129cf584f2df0b50002bb88ac">getDeltaTriggerTime</a>();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   Response::Status respondLayerSetMaxPhase(std::shared_ptr&lt;LayerSetMaxPhaseMessage const&gt; message);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   Response::Status respondLayerWriteParams(std::shared_ptr&lt;LayerWriteParamsMessage const&gt; message);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   Response::Status</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   respondLayerProbeWriteParams(std::shared_ptr&lt;LayerProbeWriteParamsMessage const&gt; message);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   Response::Status</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   respondLayerClearProgressFlags(std::shared_ptr&lt;LayerClearProgressFlagsMessage const&gt; message);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   Response::Status</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   respondLayerRecvSynapticInput(std::shared_ptr&lt;LayerRecvSynapticInputMessage const&gt; message);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   Response::Status respondLayerUpdateState(std::shared_ptr&lt;LayerUpdateStateMessage const&gt; message);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   Response::Status respondLayerCopyFromGpu(std::shared_ptr&lt;LayerCopyFromGpuMessage const&gt; message);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDA</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   Response::Status</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   respondLayerAdvanceDataStore(std::shared_ptr&lt;LayerAdvanceDataStoreMessage const&gt; message);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   Response::Status respondLayerPublish(std::shared_ptr&lt;LayerPublishMessage const&gt; message);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   Response::Status</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   respondLayerCheckNotANumber(std::shared_ptr&lt;LayerCheckNotANumberMessage const&gt; message);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="comment">// respondLayerUpdateActiveIndices removed Feb 3, 2017. Layers update active indices</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="comment">// in response to other messages, when needed.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   Response::Status respondLayerOutputState(std::shared_ptr&lt;LayerOutputStateMessage const&gt; message);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> publish(<a class="code" href="classPV_1_1Communicator.html">Communicator</a> *comm, <span class="keywordtype">double</span> simTime);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> resetGSynBuffers(<span class="keywordtype">double</span> timef, <span class="keywordtype">double</span> dt);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="comment">// ************************************************************************************//</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="comment">// mpi public wait method to ensure all targets have received synaptic input before proceeding to</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="comment">// next time step</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> waitOnPublish(<a class="code" href="classPV_1_1Communicator.html">Communicator</a> *comm);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> updateAllActiveIndices();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordtype">void</span> updateActiveIndices();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keywordtype">int</span> resetBuffer(<span class="keywordtype">float</span> *buf, <span class="keywordtype">int</span> numItems);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">bool</span> localDimensionsEqual(<a class="code" href="structPVLayerLoc__.html">PVLayerLoc</a> <span class="keyword">const</span> *loc1, <a class="code" href="structPVLayerLoc__.html">PVLayerLoc</a> <span class="keyword">const</span> *loc2);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keywordtype">int</span> mirrorInteriorToBorder(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *cube, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *borderCube);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keyword">virtual</span> Response::Status outputState(<span class="keywordtype">double</span> timef);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> writeActivity(<span class="keywordtype">double</span> timed);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> writeActivitySparse(<span class="keywordtype">double</span> timed);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> insertProbe(<a class="code" href="classPV_1_1LayerProbe.html">LayerProbe</a> *probe);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   Response::Status outputProbeParams();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keywordtype">bool</span> <a class="code" href="classPV_1_1HyPerLayer.html#a4bc274528390800826b2e9fdbbf19313">isExchangeFinished</a>(<span class="keywordtype">int</span> delay = 0);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordtype">void</span> clearProgressFlags();</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <span class="keywordtype">int</span> getNumProbes() { <span class="keywordflow">return</span> numProbes; }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="classPV_1_1LayerProbe.html">LayerProbe</a> *getProbe(<span class="keywordtype">int</span> n) { <span class="keywordflow">return</span> (n &gt;= 0 &amp;&amp; n &lt; numProbes) ? probes[n] : NULL; }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="comment">// TODO: should the mirroring functions be static?  Why are they virtual?</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToNorthWest(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToNorth(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToNorthEast(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToWest(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToEast(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToSouthWest(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToSouth(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> mirrorToSouthEast(<a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *dest, <a class="code" href="structPVLayerCube__.html">PVLayerCube</a> *src);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classPV_1_1HyPerLayer.html#a5e0693ed1e7c21c88180e40a79613acb">addRecvConn</a>(<a class="code" href="classPV_1_1BaseConnection.html">BaseConnection</a> *conn);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="comment">// Public access functions:</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordtype">int</span> getNumNeurons() { <span class="keywordflow">return</span> clayer-&gt;numNeurons; }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keywordtype">int</span> getNumExtended() { <span class="keywordflow">return</span> clayer-&gt;numExtended; }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordtype">int</span> getNumNeuronsAllBatches() { <span class="keywordflow">return</span> clayer-&gt;numNeuronsAllBatches; }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordtype">int</span> getNumExtendedAllBatches() { <span class="keywordflow">return</span> clayer-&gt;numExtendedAllBatches; }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordtype">int</span> getNumGlobalNeurons() {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keyword">const</span> <a class="code" href="structPVLayerLoc__.html">PVLayerLoc</a> *loc = getLayerLoc();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">return</span> loc-&gt;nxGlobal * loc-&gt;nyGlobal * loc-&gt;nf;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keywordtype">int</span> getNumGlobalExtended() {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keyword">const</span> <a class="code" href="structPVLayerLoc__.html">PVLayerLoc</a> *loc = getLayerLoc();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span> (loc-&gt;nxGlobal + loc-&gt;halo.lt + loc-&gt;halo.rt)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;             * (loc-&gt;nyGlobal + loc-&gt;halo.dn + loc-&gt;halo.up) * loc-&gt;nf;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordtype">int</span> getNumDelayLevels() { <span class="keywordflow">return</span> numDelayLevels; }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordtype">int</span> increaseDelayLevels(<span class="keywordtype">int</span> neededDelay);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> requireMarginWidth(<span class="keywordtype">int</span> marginWidthNeeded, <span class="keywordtype">int</span> *marginWidthResult, <span class="keywordtype">char</span> axis);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> requireChannel(<span class="keywordtype">int</span> channelNeeded, <span class="keywordtype">int</span> *numChannelsResult);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <a class="code" href="structPVLayer__.html">PVLayer</a> *getCLayer() { <span class="keywordflow">return</span> clayer; }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordtype">float</span> *getV() { <span class="keywordflow">return</span> clayer-&gt;V; } <span class="comment">// name query</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordtype">int</span> getNumChannels() { <span class="keywordflow">return</span> numChannels; }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordtype">float</span> *getChannel(ChannelType ch) { <span class="comment">// name query</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">return</span> (ch &lt; this-&gt;numChannels &amp;&amp; ch &gt;= 0) ? GSyn[ch] : NULL;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">float</span> getChannelTimeConst(<span class="keyword">enum</span> ChannelType channel_type) { <span class="keywordflow">return</span> 0.0f; }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordtype">int</span> getXScale() { <span class="keywordflow">return</span> clayer-&gt;xScale; }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keywordtype">int</span> getYScale() { <span class="keywordflow">return</span> clayer-&gt;yScale; }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordtype">bool</span> useMirrorBCs() { <span class="keywordflow">return</span> this-&gt;mirrorBCflag; }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordtype">float</span> getValueBC() { <span class="keywordflow">return</span> this-&gt;valueBC; }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keywordtype">bool</span> getSparseFlag() { <span class="keywordflow">return</span> this-&gt;sparseLayer; }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keywordtype">int</span> getPhase() { <span class="keywordflow">return</span> this-&gt;phase; }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <span class="comment">// implementation of LayerDataInterface interface</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="classPV_1_1HyPerLayer.html#a09e35d33646f5a6dc1e0a81e75de1839">getLayerData</a>(<span class="keywordtype">int</span> delay = 0);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <a class="code" href="structPVLayerLoc__.html">PVLayerLoc</a> <span class="keyword">const</span> *getLayerLoc()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;(clayer-&gt;loc); }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="keywordtype">bool</span> isExtended() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordtype">double</span> getLastUpdateTime() { <span class="keywordflow">return</span> mLastUpdateTime; }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keywordtype">double</span> getNextUpdateTime() { <span class="keywordflow">return</span> mLastUpdateTime + <a class="code" href="classPV_1_1HyPerLayer.html#a7ddccdd0e2b3db084c4c3775341d7664">getDeltaUpdateTime</a>(); }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <a class="code" href="classPV_1_1Publisher.html">Publisher</a> *getPublisher() { <span class="keywordflow">return</span> publisher; }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keyword">virtual</span> Response::Status</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   communicateInitInfo(std::shared_ptr&lt;CommunicateInitInfoMessage const&gt; message) <span class="keyword">override</span>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keyword">virtual</span> Response::Status allocateDataStructures() <span class="keyword">override</span>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keyword">virtual</span> Response::Status setMaxPhase(<span class="keywordtype">int</span> *maxPhase);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keyword">virtual</span> Response::Status registerData(<a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer) <span class="keyword">override</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keyword">virtual</span> Response::Status initializeState() <span class="keyword">override</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="keywordtype">int</span> openOutputStateFile(<a class="code" href="classPV_1_1Checkpointer.html">Checkpointer</a> *checkpointer);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">/* static methods called by updateState({long_argument_list})*/</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> runUpdateKernel();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keyword">virtual</span> Response::Status updateStateGpu(<span class="keywordtype">double</span> timef, <span class="keywordtype">double</span> dt);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keyword">virtual</span> Response::Status updateState(<span class="keywordtype">double</span> timef, <span class="keywordtype">double</span> dt);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> setActivity();</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordtype">void</span> freeChannels();</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordtype">bool</span> mNeedToPublish = <span class="keyword">true</span>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <span class="keywordtype">int</span> numChannels; <span class="comment">// number of channels</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordtype">float</span> **GSyn; <span class="comment">// of dynamic length numChannels</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <a class="code" href="classPV_1_1Publisher.html">Publisher</a> *publisher = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordtype">float</span> nxScale, nyScale; <span class="comment">// Size of layer relative to column</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="keywordtype">int</span> numFeatures;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordtype">int</span> xmargin, ymargin;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordtype">bool</span> initializeFromCheckpointFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="comment">// If parent HyPerCol sets initializeFromCheckpointDir and this flag is set,</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="comment">// the initial state is loaded from the initializeFromCheckpointDir.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="comment">// If the flag is false or the parent&#39;s initializeFromCheckpointDir is empty,</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="comment">// the initial siate is calculated using setInitialValues().</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keywordtype">int</span> numProbes;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <a class="code" href="classPV_1_1LayerProbe.html">LayerProbe</a> **probes;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="keywordtype">int</span> phase; <span class="comment">// All layers with phase 0 get updated before any with phase 1, etc.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordtype">int</span> numDelayLevels; <span class="comment">// The number of timesteps in the datastore ring buffer to store older</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="comment">// timesteps for connections with delays</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordtype">bool</span> mirrorBCflag; <span class="comment">// true when mirror BC are to be applied</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordtype">float</span> valueBC; <span class="comment">// If mirrorBCflag is false, the value of A to fill extended cells with</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordtype">double</span> initialWriteTime; <span class="comment">// time of next output</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <span class="keywordtype">double</span> writeTime; <span class="comment">// time of next output</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordtype">double</span> writeStep; <span class="comment">// output time interval</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <a class="code" href="classPV_1_1CheckpointableFileStream.html">CheckpointableFileStream</a> *mOutputStateStream = <span class="keyword">nullptr</span>; <span class="comment">// activity generated by outputState</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   <span class="keywordtype">bool</span> sparseLayer; <span class="comment">// if true, only nonzero activities are saved; if false, all values are saved.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="comment">// bool writeSparseValues; // removed March 14, 2017</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordtype">int</span> writeActivityCalls; <span class="comment">// Number of calls to writeActivity (written to nbands in the header of</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="comment">// the a%d.pvp file)</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordtype">int</span> writeActivitySparseCalls; <span class="comment">// Number of calls to writeActivitySparse (written to nbands in the</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="comment">// header of the a%d.pvp file)</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordtype">int</span> *marginIndices; <span class="comment">// indices of neurons in margin</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordtype">int</span> numMargin; <span class="comment">// number of neurons in margin</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rngSeedBase; <span class="comment">// The starting seed for rng.  The parent HyPerCol reserves</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="comment">// {rngSeedbase, rngSeedbase+1,...rngSeedbase+neededRNGSeeds-1} for use</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="comment">// by this layer</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordtype">char</span> *initVTypeString   = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <a class="code" href="classPV_1_1BaseInitV.html">BaseInitV</a> *mInitVObject = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> **synchronizedMarginWidthLayers;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordtype">int</span> numSynchronizedMarginWidthLayers;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="comment">// Trigger-related parameters</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="comment">//  Although triggerFlag was deprecated as a params file parameter, it remains as a member</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="comment">//  variable to allow quick testing of whether we&#39;re triggering.  It is set during</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="comment">//  ioParam_triggerLayerName.</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordtype">bool</span> triggerFlag; <span class="comment">// Whether the layer has different behavior in response to another layer&#39;s</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="comment">// update.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordtype">char</span> *triggerLayerName; <span class="comment">// The layer that triggers different behavior.  To turn triggering off,</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="comment">// set this parameter to NULL or &quot;&quot;</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordtype">char</span> *triggerBehavior; <span class="comment">// Specifies how to respond to a trigger.  Current values are</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="comment">// &quot;updateOnlyOnTrigger&quot; or &quot;resetStateOnTrigger&quot;</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   TriggerBehaviorType triggerBehaviorType;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordtype">char</span> *triggerResetLayerName; <span class="comment">// If triggerBehavior is &quot;resetStateOnTrigger&quot;, specifies the layer</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="comment">// to use in resetting values.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordtype">double</span> triggerOffset; <span class="comment">// Adjust the timestep when the trigger is receieved by this amount; must</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="comment">// be &gt;=0.  A positive value means the trigger occurs before the</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="comment">// triggerLayerName layer updates.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> *triggerLayer;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <a class="code" href="classPV_1_1HyPerLayer.html">HyPerLayer</a> *triggerResetLayer;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordtype">char</span> *dataTypeString;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   PVDataType dataType;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordtype">double</span> mLastUpdateTime;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordtype">double</span> mLastTriggerTime;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="keywordtype">float</span> **thread_gSyn; <span class="comment">// Accumulate buffer for each thread, only used if numThreads &gt; 1</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   std::vector&lt;BaseConnection *&gt; recvConns;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordtype">bool</span> mHasReceived = <span class="keyword">false</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <span class="keywordtype">bool</span> mHasUpdated  = <span class="keyword">false</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">// GPU variables</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">void</span> syncGpu();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">double</span> addGpuTimers();</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordtype">void</span> copyAllGSynToDevice();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordtype">void</span> copyAllGSynFromDevice();</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keywordtype">void</span> copyAllVFromDevice();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordtype">void</span> copyAllActivityFromDevice();</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   PVCuda::CudaBuffer *getDeviceV() { <span class="keywordflow">return</span> d_V; }</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   PVCuda::CudaBuffer *getDeviceGSyn() { <span class="keywordflow">return</span> d_GSyn; }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDNN</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   PVCuda::CudaBuffer *getCudnnGSyn() { <span class="keywordflow">return</span> cudnn_GSyn; }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDNN</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   PVCuda::CudaBuffer *getDeviceActivity() { <span class="keywordflow">return</span> d_Activity; }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   PVCuda::CudaBuffer *getDeviceDatastore() { <span class="keywordflow">return</span> d_Datastore; }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   PVCuda::CudaBuffer *getDeviceActiveIndices() { <span class="keywordflow">return</span> d_ActiveIndices; }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   PVCuda::CudaBuffer *getDeviceNumActive() { <span class="keywordflow">return</span> d_numActive; }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDNN</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   PVCuda::CudaBuffer *getCudnnDatastore() { <span class="keywordflow">return</span> cudnn_Datastore; }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDNN</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordtype">void</span> setAllocDeviceV() { allocDeviceV = <span class="keyword">true</span>; }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keywordtype">void</span> setAllocDeviceGSyn() { allocDeviceGSyn = <span class="keyword">true</span>; }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordtype">void</span> setAllocDeviceActivity() { allocDeviceActivity = <span class="keyword">true</span>; }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordtype">void</span> setAllocDeviceDatastore() { allocDeviceDatastore = <span class="keyword">true</span>; }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordtype">void</span> setAllocDeviceActiveIndices() { allocDeviceActiveIndices = <span class="keyword">true</span>; }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordtype">bool</span> getUpdatedDeviceActivityFlag() { <span class="keywordflow">return</span> updatedDeviceActivity; }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordtype">void</span> setUpdatedDeviceActivityFlag(<span class="keywordtype">bool</span> in) { updatedDeviceActivity = in; }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordtype">bool</span> getUpdatedDeviceDatastoreFlag() { <span class="keywordflow">return</span> updatedDeviceDatastore; }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keywordtype">void</span> setUpdatedDeviceDatastoreFlag(<span class="keywordtype">bool</span> in) { updatedDeviceDatastore = in; }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordtype">bool</span> getUpdatedDeviceGSynFlag() { <span class="keywordflow">return</span> updatedDeviceGSyn; }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordtype">void</span> setUpdatedDeviceGSynFlag(<span class="keywordtype">bool</span> in) { updatedDeviceGSyn = in; }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> allocateUpdateKernel();</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classPV_1_1HyPerLayer.html#af6bf682a8b67348ca0cf200a9ba3a44b">allocateDeviceBuffers</a>();</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="comment">// OpenCL buffers and their corresponding flags</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordtype">bool</span> allocDeviceV;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordtype">bool</span> allocDeviceGSyn; <span class="comment">// array of channels to allocate</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordtype">bool</span> allocDeviceActivity;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordtype">bool</span> allocDeviceDatastore;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordtype">bool</span> allocDeviceActiveIndices;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordtype">bool</span> updatedDeviceActivity;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keywordtype">bool</span> updatedDeviceDatastore;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordtype">bool</span> updatedDeviceGSyn;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordtype">bool</span> mRecvGpu;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordtype">bool</span> mUpdateGpu;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   PVCuda::CudaBuffer *d_V;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   PVCuda::CudaBuffer *d_GSyn;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   PVCuda::CudaBuffer *d_Activity;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   PVCuda::CudaBuffer *d_Datastore;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   PVCuda::CudaBuffer *d_numActive;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   PVCuda::CudaBuffer *d_ActiveIndices;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   PVCuda::CudaKernel *krUpdate;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDNN</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   PVCuda::CudaBuffer *cudnn_GSyn;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   PVCuda::CudaBuffer *cudnn_Datastore;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDNN</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="preprocessor">#endif // PV_USE_CUDA</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <a class="code" href="classPV_1_1Timer.html">Timer</a> *update_timer;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <a class="code" href="classPV_1_1Timer.html">Timer</a> *recvsyn_timer;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <a class="code" href="classPV_1_1Timer.html">Timer</a> *publish_timer;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <a class="code" href="classPV_1_1Timer.html">Timer</a> *timescale_timer;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <a class="code" href="classPV_1_1Timer.html">Timer</a> *io_timer;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">#ifdef PV_USE_CUDA</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   PVCuda::CudaTimer *gpu_recvsyn_timer;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   PVCuda::CudaTimer *gpu_update_timer;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;};</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;} <span class="comment">// namespace PV</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HYPERLAYER_HPP_ */</span><span class="preprocessor"></span></div><div class="ttc" id="structPVLayer___html"><div class="ttname"><a href="structPVLayer__.html">PVLayer_</a></div><div class="ttdef"><b>Definition:</b> <a href="pv__types_8h_source.html#l00074">pv_types.h:74</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_adf78265c6f0dc7bb94286934a9e5bd7a"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#adf78265c6f0dc7bb94286934a9e5bd7a">PV::HyPerLayer::ioParamsFillGroup</a></div><div class="ttdeci">virtual int ioParamsFillGroup(enum ParamsIOFlag ioFlag) override</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00571">HyPerLayer.cpp:571</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_abf47d71a0d1acabaebf97125c196f870"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#abf47d71a0d1acabaebf97125c196f870">PV::HyPerLayer::ioParam_triggerOffset</a></div><div class="ttdeci">virtual void ioParam_triggerOffset(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">triggerOffset: If triggerLayer is set, triggers &lt;triggerOffset&gt; timesteps before target trigger ...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00761">HyPerLayer.cpp:761</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a06eb20101adacc02c0963e981816dfa2"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a06eb20101adacc02c0963e981816dfa2">PV::HyPerLayer::resetStateOnTrigger</a></div><div class="ttdeci">virtual void resetStateOnTrigger()</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01769">HyPerLayer.cpp:1769</a></div></div>
<div class="ttc" id="classPV_1_1HyPerCol_html"><div class="ttname"><a href="classPV_1_1HyPerCol.html">PV::HyPerCol</a></div><div class="ttdef"><b>Definition:</b> <a href="HyPerCol_8hpp_source.html#l00041">HyPerCol.hpp:41</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a5cde54075d384518c5516f8c079ca26d"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a5cde54075d384518c5516f8c079ca26d">PV::HyPerLayer::ioParam_triggerBehavior</a></div><div class="ttdeci">virtual void ioParam_triggerBehavior(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">triggerBehavior: If triggerLayerName is set, this parameter specifies how the trigger is handled...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00774">HyPerLayer.cpp:774</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_af6bf682a8b67348ca0cf200a9ba3a44b"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#af6bf682a8b67348ca0cf200a9ba3a44b">PV::HyPerLayer::allocateDeviceBuffers</a></div><div class="ttdeci">virtual int allocateDeviceBuffers()</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01090">HyPerLayer.cpp:1090</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a08b613ce7777b06a21ef20c85c739f4b"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a08b613ce7777b06a21ef20c85c739f4b">PV::HyPerLayer::ioParam_writeStep</a></div><div class="ttdeci">virtual void ioParam_writeStep(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">writeStep: Specifies how often to output a pvp file for this layer </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00825">HyPerLayer.cpp:825</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a65e4c8eaa17655ef4c03147beed369b3"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a65e4c8eaa17655ef4c03147beed369b3">PV::HyPerLayer::ioParam_phase</a></div><div class="ttdeci">virtual void ioParam_phase(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">phase: Defines the ordering in which each layer is updated </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00651">HyPerLayer.cpp:651</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a2e384c9ee929aef35ba67c526ff78fd2"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a2e384c9ee929aef35ba67c526ff78fd2">PV::HyPerLayer::isAllInputReady</a></div><div class="ttdeci">bool isAllInputReady()</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01923">HyPerLayer.cpp:1923</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_abea1a703930c35493f42ea38bf9a0118"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#abea1a703930c35493f42ea38bf9a0118">PV::HyPerLayer::allocateRestrictedBuffer</a></div><div class="ttdeci">void allocateRestrictedBuffer(float **buf, const char *bufname)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00325">HyPerLayer.cpp:325</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a66b9f708d3e8f077a7b4fe8d51b4b138"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a66b9f708d3e8f077a7b4fe8d51b4b138">PV::HyPerLayer::ioParam_initializeFromCheckpointFlag</a></div><div class="ttdeci">virtual void ioParam_initializeFromCheckpointFlag(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">initializeFromCheckpointFlag: If set to true, initialize using checkpoint direcgtory set in HyPerCol...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00671">HyPerLayer.cpp:671</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a4bc274528390800826b2e9fdbbf19313"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a4bc274528390800826b2e9fdbbf19313">PV::HyPerLayer::isExchangeFinished</a></div><div class="ttdeci">bool isExchangeFinished(int delay=0)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01921">HyPerLayer.cpp:1921</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a20ef648236095449ebc8cc86716915ac"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a20ef648236095449ebc8cc86716915ac">PV::HyPerLayer::ioParam_sparseLayer</a></div><div class="ttdeci">virtual void ioParam_sparseLayer(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">sparseLayer: Specifies if the layer should be considered sparese for optimization and output ...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00852">HyPerLayer.cpp:852</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a38dbdd16a68095acea310a7f7003fa13"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a38dbdd16a68095acea310a7f7003fa13">PV::HyPerLayer::ioParam_nf</a></div><div class="ttdeci">virtual void ioParam_nf(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">nf: Defines how many features this layer has </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00647">HyPerLayer.cpp:647</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html"><div class="ttname"><a href="classPV_1_1HyPerLayer.html">PV::HyPerLayer</a></div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8hpp_source.html#l00064">HyPerLayer.hpp:64</a></div></div>
<div class="ttc" id="structPVLayerCube___html"><div class="ttname"><a href="structPVLayerCube__.html">PVLayerCube_</a></div><div class="ttdef"><b>Definition:</b> <a href="pv__types_8h_source.html#l00054">pv_types.h:54</a></div></div>
<div class="ttc" id="classPV_1_1Communicator_html"><div class="ttname"><a href="classPV_1_1Communicator.html">PV::Communicator</a></div><div class="ttdef"><b>Definition:</b> <a href="Communicator_8hpp_source.html#l00021">Communicator.hpp:21</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a4cb78e4b327b84207199f222cd79f808"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a4cb78e4b327b84207199f222cd79f808">PV::HyPerLayer::ioParam_triggerLayerName</a></div><div class="ttdeci">virtual void ioParam_triggerLayerName(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">triggerLayerName: Specifies the name of the layer that this layer triggers off of. If set to NULL or the empty string, the layer does not trigger but updates its state on every timestep. </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00702">HyPerLayer.cpp:702</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a7ddccdd0e2b3db084c4c3775341d7664"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a7ddccdd0e2b3db084c4c3775341d7664">PV::HyPerLayer::getDeltaUpdateTime</a></div><div class="ttdeci">virtual double getDeltaUpdateTime()</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01677">HyPerLayer.cpp:1677</a></div></div>
<div class="ttc" id="classPV_1_1BaseConnection_html"><div class="ttname"><a href="classPV_1_1BaseConnection.html">PV::BaseConnection</a></div><div class="ttdef"><b>Definition:</b> <a href="BaseConnection_8hpp_source.html#l00023">BaseConnection.hpp:23</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a4427fa8d7ed110c3cc45d243a425c16f"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a4427fa8d7ed110c3cc45d243a425c16f">PV::HyPerLayer::initialize</a></div><div class="ttdeci">int initialize(const char *name, HyPerCol *hc)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00129">HyPerLayer.cpp:129</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a69fcd09e34fbb76fc3e6434443c2fe0e"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a69fcd09e34fbb76fc3e6434443c2fe0e">PV::HyPerLayer::ioParam_valueBC</a></div><div class="ttdeci">virtual void ioParam_valueBC(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">valueBC: If mirrorBC is set to true, Uses the specified value for the margin area ...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00664">HyPerLayer.cpp:664</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a60536458c87edac02bd49815a7524662"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a60536458c87edac02bd49815a7524662">PV::HyPerLayer::allocateExtendedBuffer</a></div><div class="ttdeci">void allocateExtendedBuffer(float **buf, const char *bufname)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00329">HyPerLayer.cpp:329</a></div></div>
<div class="ttc" id="classPV_1_1BaseInitV_html"><div class="ttname"><a href="classPV_1_1BaseInitV.html">PV::BaseInitV</a></div><div class="ttdef"><b>Definition:</b> <a href="BaseInitV_8hpp_source.html#l00015">BaseInitV.hpp:15</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a8a8f1f11808763cf05727f5e15f595a8"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a8a8f1f11808763cf05727f5e15f595a8">PV::HyPerLayer::needUpdate</a></div><div class="ttdeci">virtual bool needUpdate(double simTime, double dt)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01695">HyPerLayer.cpp:1695</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a0d14e0e4bcfd9d10aa0918503ce4a7d6"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a0d14e0e4bcfd9d10aa0918503ce4a7d6">PV::HyPerLayer::ioParam_mirrorBCflag</a></div><div class="ttdeci">virtual void ioParam_mirrorBCflag(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">mirrorBCflag: If set to true, the margin will mirror the data </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00660">HyPerLayer.cpp:660</a></div></div>
<div class="ttc" id="classPV_1_1BaseLayer_html"><div class="ttname"><a href="classPV_1_1BaseLayer.html">PV::BaseLayer</a></div><div class="ttdef"><b>Definition:</b> <a href="BaseLayer_8hpp_source.html#l00023">BaseLayer.hpp:23</a></div></div>
<div class="ttc" id="classPV_1_1Random_html"><div class="ttname"><a href="classPV_1_1Random.html">PV::Random</a></div><div class="ttdef"><b>Definition:</b> <a href="Random_8hpp_source.html#l00029">Random.hpp:29</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_aded80bac62512e73f789bd209933717f"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#aded80bac62512e73f789bd209933717f">PV::HyPerLayer::ioParam_triggerResetLayerName</a></div><div class="ttdeci">virtual void ioParam_triggerResetLayerName(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">triggerResetLayerName: If triggerLayerName is set, this parameter specifies the layer to use for upda...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00814">HyPerLayer.cpp:814</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a5e0693ed1e7c21c88180e40a79613acb"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a5e0693ed1e7c21c88180e40a79613acb">PV::HyPerLayer::addRecvConn</a></div><div class="ttdeci">void addRecvConn(BaseConnection *conn)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01235">HyPerLayer.cpp:1235</a></div></div>
<div class="ttc" id="classPV_1_1LayerProbe_html"><div class="ttname"><a href="classPV_1_1LayerProbe.html">PV::LayerProbe</a></div><div class="ttdef"><b>Definition:</b> <a href="LayerProbe_8hpp_source.html#l00025">LayerProbe.hpp:25</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a651cb7cee711755c35fd7d9b450cdf5e"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a651cb7cee711755c35fd7d9b450cdf5e">PV::HyPerLayer::ioParam_InitVType</a></div><div class="ttdeci">virtual void ioParam_InitVType(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">initVType: Specifies how to initialize the V buffer. </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00681">HyPerLayer.cpp:681</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a59b5e16d1b64d30f990e2cc9c06a6cf6"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a59b5e16d1b64d30f990e2cc9c06a6cf6">PV::HyPerLayer::freeExtendedBuffer</a></div><div class="ttdeci">int freeExtendedBuffer(float **buf)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00256">HyPerLayer.cpp:256</a></div></div>
<div class="ttc" id="structPVLayerLoc___html"><div class="ttname"><a href="structPVLayerLoc__.html">PVLayerLoc_</a></div><div class="ttdef"><b>Definition:</b> <a href="PVLayerLoc_8h_source.html#l00021">PVLayerLoc.h:21</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a5aa92946ff7292396576bccb72d60329"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a5aa92946ff7292396576bccb72d60329">PV::HyPerLayer::freeRestrictedBuffer</a></div><div class="ttdeci">int freeRestrictedBuffer(float **buf)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00254">HyPerLayer.cpp:254</a></div></div>
<div class="ttc" id="classPV_1_1CheckpointableFileStream_html"><div class="ttname"><a href="classPV_1_1CheckpointableFileStream.html">PV::CheckpointableFileStream</a></div><div class="ttdef"><b>Definition:</b> <a href="CheckpointableFileStream_8hpp_source.html#l00013">CheckpointableFileStream.hpp:13</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_ae4df11ee53d2d7831ec931e5cbb4a6f9"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#ae4df11ee53d2d7831ec931e5cbb4a6f9">PV::HyPerLayer::ioParam_triggerFlag</a></div><div class="ttdeci">virtual void ioParam_triggerFlag(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">triggerFlag: (Deprecated) Specifies if this layer is being triggered </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00724">HyPerLayer.cpp:724</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_ab0088a3129cf584f2df0b50002bb88ac"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#ab0088a3129cf584f2df0b50002bb88ac">PV::HyPerLayer::getDeltaTriggerTime</a></div><div class="ttdeci">virtual double getDeltaTriggerTime()</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01686">HyPerLayer.cpp:1686</a></div></div>
<div class="ttc" id="classPV_1_1Publisher_html"><div class="ttname"><a href="classPV_1_1Publisher.html">PV::Publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="Publisher_8hpp_source.html#l00021">Publisher.hpp:21</a></div></div>
<div class="ttc" id="classPV_1_1Timer_html"><div class="ttname"><a href="classPV_1_1Timer.html">PV::Timer</a></div><div class="ttdef"><b>Definition:</b> <a href="Timer_8hpp_source.html#l00026">Timer.hpp:26</a></div></div>
<div class="ttc" id="classPV_1_1Checkpointer_html"><div class="ttname"><a href="classPV_1_1Checkpointer.html">PV::Checkpointer</a></div><div class="ttdef"><b>Definition:</b> <a href="Checkpointer_8hpp_source.html#l00025">Checkpointer.hpp:25</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a09e35d33646f5a6dc1e0a81e75de1839"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a09e35d33646f5a6dc1e0a81e75de1839">PV::HyPerLayer::getLayerData</a></div><div class="ttdeci">const float * getLayerData(int delay=0)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01573">HyPerLayer.cpp:1573</a></div></div>
<div class="ttc" id="namespacePV_html"><div class="ttname"><a href="namespacePV.html">PV</a></div><div class="ttdef"><b>Definition:</b> <a href="CheckpointableFileStream_8cpp_source.html#l00003">CheckpointableFileStream.cpp:3</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_abca1bdde7c71b4ffa71aa30f5d0eba88"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#abca1bdde7c71b4ffa71aa30f5d0eba88">PV::HyPerLayer::ioParam_writeSparseValues</a></div><div class="ttdeci">virtual void ioParam_writeSparseValues(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">writeSparseValues: No longer used. </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00862">HyPerLayer.cpp:862</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a4604e955c54550237b44c4d4290655aa"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a4604e955c54550237b44c4d4290655aa">PV::HyPerLayer::ioParam_updateGpu</a></div><div class="ttdeci">virtual void ioParam_updateGpu(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">updateGpu: When compiled using CUDA or OpenCL GPU acceleration, this flag tells whether this layer&amp;#39;s ...</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00621">HyPerLayer.cpp:621</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a820c2695371eced2233ffd17d65bcd98"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a820c2695371eced2233ffd17d65bcd98">PV::HyPerLayer::ioParam_nxScale</a></div><div class="ttdeci">virtual void ioParam_nxScale(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">nxScale: Defines the relationship between the x column size and the layer size. </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00639">HyPerLayer.cpp:639</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a07cb415a70aedf6cc8fc57e493d17139"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a07cb415a70aedf6cc8fc57e493d17139">PV::HyPerLayer::needReset</a></div><div class="ttdeci">virtual bool needReset(double timed, double dt)</div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l01718">HyPerLayer.cpp:1718</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_ad92d8a1d8ed7f9587ee6ef754d455366"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#ad92d8a1d8ed7f9587ee6ef754d455366">PV::HyPerLayer::ioParam_nyScale</a></div><div class="ttdeci">virtual void ioParam_nyScale(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">nyScale: Defines the relationship between the y column size and the layer size. </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00643">HyPerLayer.cpp:643</a></div></div>
<div class="ttc" id="classPV_1_1HyPerLayer_html_a65fe374a6f26682e54bf1c132080ea1d"><div class="ttname"><a href="classPV_1_1HyPerLayer.html#a65fe374a6f26682e54bf1c132080ea1d">PV::HyPerLayer::ioParam_initialWriteTime</a></div><div class="ttdeci">virtual void ioParam_initialWriteTime(enum ParamsIOFlag ioFlag)</div><div class="ttdoc">initialWriteTime: Specifies the first timestep to start outputing pvp files </div><div class="ttdef"><b>Definition:</b> <a href="HyPerLayer_8cpp_source.html#l00830">HyPerLayer.cpp:830</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_661d761cf52f45dc0ac6ea1d43985b5f.html">OpenPV</a></li><li class="navelem"><a class="el" href="dir_a5a2402a07c448d7bb6699a067163b2e.html">src</a></li><li class="navelem"><a class="el" href="dir_9a91aecaef209e538db0ab8c7c763d88.html">layers</a></li><li class="navelem"><b>HyPerLayer.hpp</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
